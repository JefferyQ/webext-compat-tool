<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/fira.css">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/styles.css">
    <title>Extension Compatibility Tester</title>
  </head>
  <body>
    <header class="header">
      <h1 class="masthead">
        Extension Compatibility Tester
      </h1>
    </header>

    <div class="row highlight">
      <section class="section upload">
        <form ref='uploadForm' id='uploadForm' action='/upload'
              method='post' encType="multipart/form-data">
          <input type="file" name="package" id="fileField"/>
          <button class="file-select">Select File&hellip;</button>
          <div class="file-ready">
            <h3 class="selected-file"></h3>
            <button class="form-submit">Upload</button>
          </div>
        </form>
      </section>
    </div>

    <div class="row footer highlight">
      <footer class="section">
        This tool provided with &hearts; by Mozilla.
      </footer>
    </div>

    <script>
      window.addEventListener('load', function (e) {
        let fileButton = document.querySelector('.file-select');
        let fileInput = document.querySelector('#fileField');

        fileButton.addEventListener('click', function (e) {
          fileInput.click();
          e.preventDefault();
        });

        fileInput.addEventListener('change', function (e) {
          if (e.target.files.length) {
            console.log(e.target.files);
            document.querySelector('.upload').classList.add('ready');
            document.querySelector('.selected-file').innerHTML = 'selected file: ' + e.target.files[0].name
          }
        });

      });

    </script>
  </body>
</html>
